<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>UoM Leos Project Map</title>
  <link rel="shortcut icon" type="image/x-icon" href="http://www.uomleos.org/wp-content/uploads/2018/04/favicon-1.ico" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
      <link href="https://fonts.googleapis.com/css?family=Courgette" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
  <style>
    #map {
      align-self: center;
    }
 
    .overlay{
  position: absolute;
        
        z-index: 5;
 }

.navbar{
  width:100vw;
}
      
      .brand{
        font-family: 'Indie Flower', cursive;
        font-weight: 700;
        opacity: 0.8;
      }

      .brand:hover{
          opacity: 0.5;
          cursor: pointer;
      }
      .pmap-navbar{
        background-color: rgba(255, 255, 255,0.5)!important;
      }

      .project-count{
        padding:10px;
        background-color: rgba(255,255,255,0.5); 
        border-radius: 5px;
        top:63px;
        right:2px;
      }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCamFIG1ilV1zm3KGW5P7QXwvF5m_LiHSQ" type="text/javascript"></script>
</head>

<body>
       <nav class="navbar navbar-expand-md navbar-toggleable-xl navbar-light pmap-navbar overlay">
        <div class="container">
            <!-- Left Side Of Navbar -->
            <a href="" class="navbar-brand brand" title="Reload Project Map">
                <font size="5">
                   <img src="http://www.uomleos.org/wp-content/uploads/2017/08/cropped-cropped-UOMLeoLogo-1.png" style="width:33px;height:33px;"> UoM Leos Project Map
                </font>
              </a>            
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
              
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li><a class="nav-link text-center" href="http://www.uomleos.org/" data-toggle="tooltip" data-placement="bottom" title="UoM Leos Web page"><i class="fas fa-globe fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="https://www.facebook.com/uomleos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Facebook page"><i class="fab fa-facebook fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="https://www.instagram.com/uomleos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Instagram page"><i class="fab fa-instagram fa-lg"></i><a></li>
                <li><a class="nav-link text-center" href="https://www.linkedin.com/company/uomleos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Linkedin page"><i class="fab fa-linkedin fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="https://twitter.com/uomleos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Twitter page"><i class="fab fa-twitter fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="https://www.youtube.com/uomleos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Youtube chanel"><i class="fab fa-youtube-square fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="https://plus.google.com/+UOMLeos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Google+ page"><i class="fab fa-google-plus-g fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="http://www.uom-leos.blogspot.com" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Blogger"><i class="fab fa-blogger fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="https://www.flickr.com/people/uomleos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Flicker page"><i class="fab fa-flickr fa-lg"></i></a></li>
                <li><a class="nav-link text-center" href="https://www.scribd.com/uomleos" data-toggle="tooltip" data-placement="bottom"  title="UoM Leos Scribd page"><i class="fab fa-scribd fa-lg"></i></a></li>
            </ul>
            </div>

        </div>
    </nav>
    <h6 class="overlay project-count" id="projectCount"></h6>
  <div id="map" style="height:100vh; width:100vw;" class="mx-auto d-block"></div>
  <footer class="footer text-center">
      <div class="container">
        <span class="text-muted">Â© Project Map 2018 @ UoM Leos. All right reserved.</span>
      </div>
    </footer>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OverlappingMarkerSpiderfier/1.0.3/oms.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script type="text/javascript">
  //Overlay section
  
  $(document).ready(function(){
      
      $('[data-toggle="tooltip"]').tooltip();
      
});
  
  //Map
    var image = {
      url: 'http://www.uomleos.org/wp-content/uploads/2018/04/marker_icon.png',
    };

  

    //Map Initialize
    var srilanka = { lat: 7.8731, lng: 80.7718 };
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 7.7,
      center: srilanka,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      fullscreenControl: true
    });
    infoWindow = new google.maps.InfoWindow(); // create info window object

$.get("https://www.projectmap.uomleos.org/submit/files/get.php", function(data, status){
    
    var locations = JSON.parse(data);
    $('#projectCount').text("Covered "+String(locations.length)+" social projects");
var oms = new OverlappingMarkerSpiderfier(map, {
  markersWontMove: true,
  markersWontHide: true,
  basicFormatEvents: true
});


//UOM LEOS Marker
var coordinates = { lat: 6.7968823, lng: 79.8995894 };
      var uom_marker = new google.maps.Marker({
        position: coordinates,
        url: 'http://www.uomleos.org/',
        icon: image,
        animation: google.maps.Animation.BOUNCE,
        map: map,
        title: "Double click to view www.uomleos.org" , // generate title
        name: "Leo Club of University of Moratuwa",
        address:"University of Moratuwa, Bandaranayake Mawatha, Katubedda, Moratuwa."

      });

      oms.addMarker(uom_marker); 

      google.maps.event.addListener(uom_marker, 'dblclick', function () { // marker onclick event
        //window.location.href = ;
        window.open(
          'http://www.uomleos.org/',
    '_blank' // <- This is what makes it open in a new window.
);
      });
      //marker hover effect
      google.maps.event.addListener(uom_marker, 'spider_click', function () { // 
      
      });
      
      google.maps.event.addListener(uom_marker, 'click', function () {
        var content = "<b>"+uom_marker.name+"</b><br>"+uom_marker.address+"<br><br>&diams;&nbsp;Click on pin to view all projects on this location<br>&diams;&nbsp;Double tap to open www.uomleos.org";
        infoWindow.setContent(content);
        infoWindow.open(map, uom_marker);
      });
      
      
      google.maps.event.addListener(uom_marker, 'mouseover', function () {
        var content = "<b>"+uom_marker.name+"</b><br>"+uom_marker.address+"<br><br>&diams;&nbsp;Click on pin to view all projects on this location<br>&diams;&nbsp;Double tap to open www.uomleos.org";
        infoWindow.setContent(content);
        infoWindow.open(map, uom_marker);
      });
      google.maps.event.addListener(uom_marker, 'mouseout', function () {
        infoWindow.close();
      });

      //UOM LEOS MARKER

  for (var i = 0; i < locations.length; i++) {
      var place = locations[i];
      var coordinates = { lat: parseFloat(place.lat), lng: parseFloat(place.lon) };
      var marker = new google.maps.Marker({
        position: coordinates,
        url: place.url,
        icon: image,
        animation: google.maps.Animation.DROP,
        map: map,
        title: "Double click to view "+place.name , // generate title
        name: place.name,
        address:place.address

      });
      oms.addMarker(marker); 
      google.maps.event.addListener(marker, 'dblclick', function () { // marker onclick event
        //window.location.href = ;
        window.open(
          this.url,
    '_blank' // <- This is what makes it open in a new window.
);
      });
      //marker hover effect
      google.maps.event.addListener(marker, 'spider_click', function () { // 
      
      });
      google.maps.event.addListener(marker, 'mouseover', function () {
        var content = "<b>"+this.name+"</b><br>"+this.address+"<br><br>&diams;&nbsp;Click on pin to view all projects on this location<br>&diams;&nbsp;Double tap to view project description";
        infoWindow.setContent(content);
        infoWindow.open(map, this);
      })
      google.maps.event.addListener(marker, 'mouseout', function () {
        infoWindow.close();
      });
    }


    });

    //Locations add here
    //["Project name",address,lat,lng,Url here]
    /*var locations = [
      ['Golden Nets','X Sports Arena, Mattakkuliya', 6.8135, 79.9724, 'http://www.uomleos.org/2018/04/02/golden-netz/'],
      ['LEO Youth Camp',"National youth crops tranning center,Naula", 7.7071, 80.6521, 'http://www.uomleos.org/2018/04/01/leo-youth-camp/'],
      ['Ttest',"National youth crops tranning center,Naula", 7.8071, 80.8521, 'http://www.uomleos.org/2018/04/01/leo-youth-camp/'],
      ['Ttest',"National youth crops tranning center,Naula", 7.7071, 80.6521, 'http://www.uomleos.org/2018/04/01/leo-youth-camp/'],
      ['Ttest',"National youth crops tranning center,Naula", 7.9071, 80.7521, 'http://www.uomleos.org/2018/04/01/leo-youth-camp/'],

    ];*/

  
  </script>
</body>

</html>

</html>